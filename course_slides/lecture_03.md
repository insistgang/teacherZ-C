# ç¬¬ä¸‰è®²ï¼šå…¨å˜åˆ†ä¸å›¾åƒå¤„ç†

## Total Variation and Image Processing

---

### ğŸ“‹ æœ¬è®²å¤§çº²

1. å…¨å˜åˆ†(TV)çš„å®šä¹‰ä¸æ€§è´¨
2. ROFå»å™ªæ¨¡å‹
3. TVæ­£åˆ™åŒ–çš„ç‰¹ç‚¹
4. æ•°å€¼æ±‚è§£æ–¹æ³•
5. å˜ä½“ä¸æ‰©å±•

---

### 3.1 å…¨å˜åˆ†çš„å®šä¹‰

#### æœ‰ç•Œå˜å·®å‡½æ•°ç©ºé—´

å‡½æ•° $u \in BV(\Omega)$ çš„å…¨å˜åˆ†å®šä¹‰ä¸ºï¼š
$$\|u\|_{TV} = \sup \left\{ \int_\Omega u \, \text{div} \, \phi \, dx : \phi \in C_c^1(\Omega, \mathbb{R}^d), \|\phi\|_\infty \leq 1 \right\}$$

#### å…‰æ»‘å‡½æ•°çš„ç®€åŒ–å½¢å¼

è‹¥ $u \in C^1$ï¼š
$$\|u\|_{TV} = \int_\Omega |\nabla u| \, dx$$

**åŠ¨ç”»å»ºè®®**ï¼šå±•ç¤ºTVä½œä¸º"æ€»å˜åŒ–é‡"çš„å‡ ä½•æ„ä¹‰

---

### 3.2 TV vs $\ell_2$æ­£åˆ™åŒ–

#### å¯¹æ¯”åˆ†æ

| ç‰¹æ€§ | $\ell_2$æ­£åˆ™åŒ– | TVæ­£åˆ™åŒ– |
|------|----------------|----------|
| å…¬å¼ | $\int |\nabla u|^2$ | $\int |\nabla u|$ |
| å¹³æ»‘æ•ˆæœ | è¿‡åº¦å¹³æ»‘ | è¾¹ç¼˜ä¿æŒ |
| è¾¹ç¼˜å¤„ç† | æ¨¡ç³Š | é”åˆ©ä¿æŒ |
| è®¡ç®—å¤æ‚åº¦ | ä½ï¼ˆçº¿æ€§ï¼‰ | é«˜ï¼ˆéçº¿æ€§ï¼‰ |

**åŠ¨ç”»å»ºè®®**ï¼šåŒä¸€å™ªå£°å›¾åƒç”¨ä¸¤ç§æ–¹æ³•å»å™ªçš„æ•ˆæœå¯¹æ¯”

---

### 3.3 ROFæ¨¡å‹

#### Rudin-Osher-Fatemiæ¨¡å‹ (1992)

$$\boxed{\min_u \underbrace{\|u - f\|_2^2}_{\text{æ•°æ®ä¿çœŸ}} + \lambda \underbrace{\|u\|_{TV}}_{\text{TVæ­£åˆ™}}}$$

#### ç‰©ç†æ„ä¹‰

- **æ•°æ®é¡¹**ï¼šä¿æŒä¸è§‚æµ‹æ•°æ®çš„ä¸€è‡´æ€§
- **æ­£åˆ™é¡¹**ï¼šæƒ©ç½šå›¾åƒçš„"æ€»å˜åŒ–"ï¼ŒæŠ‘åˆ¶å™ªå£°
- **å‚æ•°Î»**ï¼šå¹³è¡¡ä¸¤è€…çš„æƒé‡

---

### 3.4 TVçš„æ€§è´¨

#### å‡¸æ€§

TVèŒƒæ•°æ˜¯å‡¸å‡½æ•°ï¼š
$$\|\theta u + (1-\theta)v\|_{TV} \leq \theta \|u\|_{TV} + (1-\theta)\|v\|_{TV}$$

#### éå…‰æ»‘æ€§

TVèŒƒæ•°åœ¨ $u$ ä¸ºå¸¸æ•°å¤„ä¸å¯å¾®ï¼ˆä½†åœ¨åˆ†å¸ƒæ„ä¹‰ä¸‹æœ‰æ¬¡æ¢¯åº¦ï¼‰

#### è¾¹ç¼˜ä¿æŒæ€§

> **å…³é”®æ€§è´¨**ï¼šTVå…è®¸å›¾åƒä¸­çš„"è·³è·ƒ"ï¼ˆè¾¹ç¼˜ï¼‰ï¼Œè€Œ$\ell_2$æƒ©ç½šä¼šå¹³æ»‘æ‰è¿™äº›è·³è·ƒ

**åŠ¨ç”»å»ºè®®**ï¼šå±•ç¤ºä¸€ç»´ä¿¡å·çš„å»å™ªæ•ˆæœå¯¹æ¯”

---

### 3.5 TVçš„å„å‘åŒæ€§vså„å‘å¼‚æ€§å½¢å¼

#### å„å‘åŒæ€§TV (Isotropic)
$$\|u\|_{TV}^{iso} = \int_\Omega \sqrt{u_x^2 + u_y^2} \, dx$$

#### å„å‘å¼‚æ€§TV (Anisotropic)
$$\|u\|_{TV}^{aniso} = \int_\Omega (|u_x| + |u_y|) \, dx$$

#### æ¯”è¾ƒ

```
å„å‘åŒæ€§ï¼šæ—‹è½¬ä¸å˜ï¼Œè®¡ç®—ç¨å¤æ‚
å„å‘å¼‚æ€§ï¼šç®€å•ï¼Œä½†åå¥½æ°´å¹³/å‚ç›´è¾¹ç¼˜
```

---

### 3.6 Euler-Lagrangeæ–¹ç¨‹

#### ROFçš„å˜åˆ†å½¢å¼

å¯¹ROFæ¨¡å‹æ±‚å˜åˆ†å¾—åˆ°ï¼š
$$u - f - \lambda \nabla \cdot \left( \frac{\nabla u}{|\nabla u|} \right) = 0$$

#### æ­£åˆ™åŒ–å¤„ç†

ä¸ºé¿å… $|\nabla u| = 0$ æ—¶çš„å¥‡å¼‚æ€§ï¼Œå¼•å…¥å°å‚æ•° $\epsilon$ï¼š
$$\nabla \cdot \left( \frac{\nabla u}{\sqrt{|\nabla u|^2 + \epsilon^2}} \right)$$

---

### 3.7 ChambolleæŠ•å½±ç®—æ³•

#### å¯¹å¶å½¢å¼

ROFçš„å¯¹å¶é—®é¢˜ï¼š
$$\min_p \|f - \lambda \nabla^* p\|_2^2 \quad \text{s.t.} \quad |p| \leq 1$$

#### Chambolleè¿­ä»£ (2004)

$$p^{n+1} = \frac{p^n + \tau \nabla(\nabla^* p^n - f/\lambda)}{1 + \tau |\nabla(\nabla^* p^n - f/\lambda)|}$$

æœ€ç»ˆè§£ï¼š
$$u = f - \lambda \nabla^* p^*$$

---

### 3.8 ç¦»æ•£TV

#### å„å‘å¼‚æ€§ç¦»æ•£åŒ–

$$\|u\|_{TV}^{aniso} = \sum_{i,j} |u_{i+1,j} - u_{i,j}| + |u_{i,j+1} - u_{i,j}|$$

#### å„å‘åŒæ€§ç¦»æ•£åŒ–

$$\|u\|_{TV}^{iso} = \sum_{i,j} \sqrt{(u_{i+1,j}-u_{i,j})^2 + (u_{i,j+1}-u_{i,j})^2}$$

---

### 3.9 Split Bregmanæ–¹æ³•

#### è¾…åŠ©å˜é‡æ³•

å¼•å…¥ $d = \nabla u$ï¼Œè½¬åŒ–ä¸ºï¼š
$$\min_{u,d} \|u - f\|_2^2 + \lambda \|d\|_1 \quad \text{s.t.} \quad d = \nabla u$$

#### Bregmanè¿­ä»£

```
1. uå­é—®é¢˜ï¼š (I - Î»Î”)u = f + div(b - d)
2. då­é—®é¢˜ï¼š d = shrink(âˆ‡u + b, Î»)
3. bæ›´æ–°ï¼š  b = b + âˆ‡u - d
```

å…¶ä¸­è½¯é˜ˆå€¼ï¼š
$$\text{shrink}(x, \lambda) = \frac{x}{|x|} \max(|x| - \lambda, 0)$$

---

### 3.10 TVçš„å˜ä½“

#### åŠ æƒTV (Weighted TV)
$$\|u\|_{WTV} = \int_\Omega w(x) |\nabla u| \, dx$$

åº”ç”¨ï¼šç©ºé—´è‡ªé€‚åº”æ­£åˆ™åŒ–

#### éå±€éƒ¨TV (Nonlocal TV)
$$\|u\|_{NLTV} = \int_\Omega \int_\Omega w(x,y) |u(x) - u(y)| \, dy \, dx$$

åº”ç”¨ï¼šçº¹ç†ä¿æŒ

#### TV-$\ell_1$æ¨¡å‹
$$\min_u \|u\|_{TV} + \lambda \|u - f\|_1$$

åº”ç”¨ï¼šæ¤’ç›å™ªå£°å»é™¤

---

### ğŸ“Š æœ¬è®²æ€»ç»“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            TVæ­£åˆ™åŒ–æ ¸å¿ƒæ¦‚å¿µ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚   å®šä¹‰ï¼šâ€–uâ€–_TV = âˆ«|âˆ‡u|dx (æ€»å˜åŒ–é‡)              â”‚
â”‚                                                 â”‚
â”‚   æ€§è´¨ï¼š                                        â”‚
â”‚   â€¢ å‡¸æ€§ â†’ å…¨å±€æœ€ä¼˜                              â”‚
â”‚   â€¢ è¾¹ç¼˜ä¿æŒ â†’ å…è®¸è·³è·ƒ                          â”‚
â”‚   â€¢ éå…‰æ»‘ â†’ éœ€è¦ç‰¹æ®Šæ±‚è§£å™¨                      â”‚
â”‚                                                 â”‚
â”‚   ROFæ¨¡å‹ï¼šmin_u â€–u-fâ€–Â²_2 + Î»â€–uâ€–_TV             â”‚
â”‚                                                 â”‚
â”‚   æ±‚è§£ï¼šChambolle / Split Bregman / ADMM        â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ“š è¯¾åä½œä¸š

1. **æ¨å¯¼é¢˜**ï¼šè¯æ˜TVèŒƒæ•°æ˜¯å‡¸å‡½æ•°

2. **å®ç°é¢˜**ï¼šç”¨æ¢¯åº¦ä¸‹é™æ³•å®ç°ROFå»å™ªï¼ˆå«æ­£åˆ™åŒ–Îµï¼‰

3. **æ¯”è¾ƒé¢˜**ï¼šå¯¹æ¯”$\ell_1$å’Œ$\ell_2$æ•°æ®é¡¹åœ¨æ¤’ç›å™ªå£°ä¸‹çš„è¡¨ç°

4. **æ€è€ƒé¢˜**ï¼šä¸ºä»€ä¹ˆTVæ­£åˆ™åŒ–ä¼šå¯¼è‡´"é˜¶æ¢¯æ•ˆåº”"ï¼ˆstaircasingï¼‰ï¼Ÿ

---

### ğŸ“– æ‰©å±•é˜…è¯»

1. **ç»å…¸è®ºæ–‡**ï¼š
   - Rudin, Osher, Fatemi, "Nonlinear total variation based noise removal algorithms", Physica D, 1992
   - Chambolle, "An algorithm for total variation minimization and applications", JMIV, 2004

2. **Caiç›¸å…³è®ºæ–‡**ï¼š
   - Cai, Chan, Shen, "Convergence of split Bregman iteration", J. Imaging Sci.

3. **æ‰©å±•æ–¹æ³•**ï¼š
   - TV-L1æ¨¡å‹ã€éå±€éƒ¨TVã€ç»“æ„TV

---

### ğŸ“– å‚è€ƒæ–‡çŒ®

1. Rudin, L.I., Osher, S., & Fatemi, E. (1992). Nonlinear total variation based noise removal algorithms. *Physica D*, 60(1-4), 259-268.

2. Chambolle, A. (2004). An algorithm for total variation minimization and applications. *JMIV*, 20(1-2), 89-97.

3. Goldstein, T. & Osher, S. (2009). The split Bregman method for L1-regularized problems. *SIAM J. Imaging Sci.*, 2(2), 323-343.

4. Cai, X., Chan, R., & Shen, Z. (2008). A framelet-based image inpainting algorithm. *ACHA*.
