<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>研究仪表盘 - 概览</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <aside class="sidebar">
    <div class="sidebar-header">
      <h1>研究仪表盘</h1>
    </div>
    <nav class="sidebar-nav">
      <a href="dashboard.html" class="nav-item active">📊 概览</a>
      <a href="papers.html" class="nav-item">📄 论文分析</a>
      <a href="network.html" class="nav-item">🔗 引用网络</a>
      <a href="timeline.html" class="nav-item">📅 时序分析</a>
      <a href="collaborators.html" class="nav-item">👥 合作者分析</a>
      <a href="heatmap.html" class="nav-item">🔥 热力图</a>
      <a href="comparison.html" class="nav-item">⚖️ 对比分析</a>
    </nav>
  </aside>

  <main class="main-content">
    <header class="header">
      <h2 class="page-title">研究概览</h2>
      <div class="header-actions">
        <div class="search-box">
          <input type="text" placeholder="搜索论文、合作者...">
        </div>
        <div class="export-dropdown">
          <button class="btn btn-outline">📥 导出</button>
          <div class="export-menu">
            <button data-export="csv">导出 CSV</button>
            <button data-export="json">导出 JSON</button>
            <button data-export="pdf">导出 PDF</button>
          </div>
        </div>
        <button class="theme-toggle">🌙</button>
      </div>
    </header>

    <div class="filters">
      <div class="filter-group">
        <label>年份</label>
        <select name="year">
          <option value="all">全部年份</option>
          <option value="2024">2024</option>
          <option value="2023">2023</option>
          <option value="2022">2022</option>
          <option value="2020-2021">2020-2021</option>
          <option value="2015-2019">2015-2019</option>
        </select>
      </div>
      <div class="filter-group">
        <label>领域</label>
        <select name="field">
          <option value="all">全部领域</option>
          <option value="计算机视觉">计算机视觉</option>
          <option value="自然语言处理">自然语言处理</option>
          <option value="机器学习">机器学习</option>
          <option value="深度学习">深度学习</option>
        </select>
      </div>
    </div>

    <div class="cards-grid" id="statsCards"></div>

    <div class="charts-grid">
      <div class="chart-card">
        <div class="chart-card-header">
          <h3 class="chart-card-title">论文发表趋势</h3>
        </div>
        <div class="chart-container">
          <canvas id="papersTrendChart"></canvas>
        </div>
      </div>
      <div class="chart-card">
        <div class="chart-card-header">
          <h3 class="chart-card-title">引用增长趋势</h3>
        </div>
        <div class="chart-container">
          <canvas id="citationsTrendChart"></canvas>
        </div>
      </div>
    </div>

    <div class="charts-grid">
      <div class="chart-card">
        <div class="chart-card-header">
          <h3 class="chart-card-title">研究领域分布</h3>
        </div>
        <div class="chart-container">
          <canvas id="fieldDistributionChart"></canvas>
        </div>
      </div>
      <div class="chart-card">
        <div class="chart-card-header">
          <h3 class="chart-card-title">近期论文</h3>
        </div>
        <div class="chart-container" style="overflow-y: auto;">
          <table class="data-table" id="recentPapersTable">
            <thead>
              <tr>
                <th>论文标题</th>
                <th>年份</th>
                <th>引用</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </main>

  <script src="js/data.js"></script>
  <script src="js/charts.js"></script>
  <script src="js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const profile = ResearchData.profile;
      
      document.getElementById('statsCards').innerHTML = `
        ${createStatCard('论文总数', profile.totalPapers, 12, '📄', 'rgba(59, 130, 246, 0.15)')}
        ${createStatCard('引用总数', Utils.formatNumber(profile.totalCitations), 18, '📈', 'rgba(16, 185, 129, 0.15)')}
        ${createStatCard('H-Index', profile.hIndex, 8, '🏆', 'rgba(245, 158, 11, 0.15)')}
        ${createStatCard('研究年限', profile.researchYears + ' 年', 0, '📅', 'rgba(139, 92, 246, 0.15)')}
      `;

      createYearDistributionChart('papersTrendChart', ResearchData.papersByYear);
      createCitationsTrendChart('citationsTrendChart', ResearchData.citationsByYear);
      createFieldDistributionChart('fieldDistributionChart', ResearchData.papers);

      const recentPapers = ResearchData.papers.slice(0, 5);
      const tbody = document.querySelector('#recentPapersTable tbody');
      tbody.innerHTML = recentPapers.map(p => `
        <tr>
          <td>${p.title}</td>
          <td>${p.year}</td>
          <td>${p.citations}</td>
        </tr>
      `).join('');
    });
  </script>
</body>
</html>
