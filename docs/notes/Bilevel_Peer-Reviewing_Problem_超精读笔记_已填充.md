# åŒå±‚è§„åˆ’æ¡†æ¶ä¸‹çš„åŒè¡Œè¯„å®¡åŒ¹é…é—®é¢˜

> **è¶…ç²¾è¯»ç¬”è®°** | 5-Agentè¾©è®ºåˆ†æç³»ç»Ÿ
> åˆ†ææ—¶é—´ï¼š2026-02-16
> ä½œè€…ï¼šGennaro Auricchio, Ruixiao Zhang, Jie Zhang, Xiaohao Cai
> æ¥æºï¼šarXiv:2307.12248 (2023)

---

## ğŸ“„ è®ºæ–‡å…ƒä¿¡æ¯

| å±æ€§ | ä¿¡æ¯ |
|------|------|
| **æ ‡é¢˜** | A Bilevel Formalism for the Peer-Reviewing Problem |
| **ä½œè€…** | Gennaro Auricchio, Ruixiao Zhang, Jie Zhang, Xiaohao Cai |
| **å¹´ä»½** | 2023 |
| **arXiv ID** | 2307.12248 |
| **æœºæ„** | University of Bath, University of Southampton |
| **é¢†åŸŸ** | ä¼˜åŒ–ç†è®ºã€åŒ¹é…é—®é¢˜ã€åšå¼ˆè®º |

### ğŸ“ æ‘˜è¦ç¿»è¯‘

æœ¬æ–‡é¦–æ¬¡å°†åŒè¡Œè¯„å®¡åˆ†é…é—®é¢˜å½¢å¼åŒ–ä¸ºåŒå±‚è§„åˆ’(Bilevel Programming)é—®é¢˜ã€‚ä¸Šå±‚é—®é¢˜ç”±ç¼–è¾‘æ§åˆ¶ï¼Œæ—¨åœ¨æœ€å¤§åŒ–åˆ†é…è´¨é‡ï¼›ä¸‹å±‚é—®é¢˜ç”±å®¡ç¨¿äººå“åº”ï¼Œæ—¨åœ¨æœ€å°åŒ–ä¸ªäººåŠªåŠ›ã€‚ç›¸æ¯”ä¼ ç»Ÿæ•´æ•°çº¿æ€§è§„åˆ’(ILP)æ–¹æ³•ï¼ŒåŒå±‚æ¡†æ¶èƒ½æ˜¾è‘—é™ä½å®¡ç¨¿äººçš„åŠªåŠ›æ–¹å·®ã€‚åœ¨UIUCæ•°æ®é›†ä¸Šçš„å®éªŒè¡¨æ˜ï¼Œè´¨é‡ä¿æŒ99%çš„åŒæ—¶ï¼ŒåŠªåŠ›æ–¹å·®é™ä½25-43%ï¼Œåœ¨éšæœºåœºæ™¯ä¸‹ç”šè‡³å¯é™ä½è‡³7-16%ï¼ˆæå‡6-14å€ï¼‰ã€‚

**å…³é”®è¯**: åŒå±‚è§„åˆ’ã€åŒè¡Œè¯„å®¡ã€åŒ¹é…é—®é¢˜ã€å…¬å¹³æ€§ã€ä¼˜åŒ–ç†è®º

---

## ğŸ¯ ä¸€å¥è¯æ€»ç»“

é€šè¿‡åŒå±‚è§„åˆ’æ¡†æ¶å»ºæ¨¡åŒè¡Œè¯„å®¡é—®é¢˜ï¼Œåœ¨ä¿æŒåˆ†é…è´¨é‡99%çš„åŒæ—¶ï¼Œå°†å®¡ç¨¿åŠªåŠ›æ–¹å·®é™ä½é«˜è¾¾14å€ã€‚

---

## ğŸ”‘ æ ¸å¿ƒåˆ›æ–°ç‚¹

1. **åŒå±‚è§„åˆ’æ¡†æ¶**ï¼šé¦–æ¬¡å°†åŒè¡Œè¯„å®¡å½¢å¼åŒ–ä¸ºBPé—®é¢˜
2. **è´ªå¿ƒå¯å‘å¼**ï¼šæ— éœ€è°ƒå‚çš„é«˜æ•ˆç®—æ³•
3. **å…¬å¹³æ€§æ˜¾è‘—æå‡**ï¼šæ–¹å·®é™ä½25-43%ï¼ˆéšæœºåœºæ™¯æœ€é«˜93%ï¼‰
4. **è´¨é‡ä¿æŒç¨³å®š**ï¼šQPå§‹ç»ˆ>90%

---

## ğŸ“Š èƒŒæ™¯ä¸åŠ¨æœº

### åŒè¡Œè¯„å®¡åˆ†é…çš„æŒ‘æˆ˜

**ä¼ ç»ŸILPæ–¹æ³•é—®é¢˜**ï¼š
```
ä¼˜åŒ–ç›®æ ‡: max <WE, X>
çº¦æŸ: å®¡ç¨¿æ•°é‡çº¦æŸã€å®¹é‡çº¦æŸ
```

**æ ¸å¿ƒé—®é¢˜**ï¼š
1. å®¡ç¨¿äººåŠªåŠ›æ–¹å·®å¤§ï¼ˆä¸å…¬å¹³ï¼‰
2. æœªè€ƒè™‘å®¡ç¨¿äººåå¥½å’Œå“åº”
3. ç¼–è¾‘ä¸å®¡ç¨¿äººçš„åšå¼ˆå…³ç³»è¢«å¿½ç•¥

### åŒå±‚è§„åˆ’çš„å¿…è¦æ€§

**ç°å®åœºæ™¯**ï¼š
- ç¼–è¾‘æå‡ºåˆ†é…æ–¹æ¡ˆ
- å®¡ç¨¿äººå¯ä»¥æ‹’ç»/æ¥å—
- å®¡ç¨¿äººæœ‰è‡ªå·±çš„ä¼˜åŒ–ç›®æ ‡ï¼ˆæœ€å°åŒ–åŠªåŠ›ï¼‰

**åšå¼ˆå…³ç³»**ï¼š
```
ä¸Šå±‚(ç¼–è¾‘): max_Z,X <WE, X> + <Y*, X>
ä¸‹å±‚(å®¡ç¨¿äºº): Y* = argmin_Y <WR, Y>
```

---

## ğŸ’¡ æ–¹æ³•è¯¦è§£ï¼ˆå«å…¬å¼æ¨å¯¼ï¼‰

### 3.1 åŒå±‚è§„åˆ’æ•°å­¦å½¢å¼

#### ä¸Šå±‚é—®é¢˜ (ULp)

```
max_{Z,X} <WE, X> + <Y*(Z), X>

s.t.
(1) li â‰¤ Î£_j X_{i,j} â‰¤ ui, âˆ€i âˆˆ [n]  (è®ºæ–‡å®¡ç¨¿æ•°é‡)
(2) Î£_i X_{i,j} â‰¤ Uj, âˆ€j âˆˆ [m]      (å®¡ç¨¿äººå®¹é‡)
(3) X_{i,j} â‰¤ Z_{i,j} + Y_{i,j}, âˆ€i,j  (åŒ¹é…çº¦æŸ)
(4) X, Y, Z âˆˆ B^(nÃ—m)              (äºŒè¿›åˆ¶å˜é‡)
```

å…¶ä¸­ï¼š
- `WE âˆˆ R^(nÃ—m)`ï¼šç¼–è¾‘è§†è§’çš„è´¨é‡çŸ©é˜µ
- `WR âˆˆ R^(nÃ—m)`ï¼šå®¡ç¨¿äººåŠªåŠ›çŸ©é˜µ
- `Y*(Z)`ï¼šä¸‹å±‚é—®é¢˜çš„æœ€ä¼˜è§£

#### ä¸‹å±‚é—®é¢˜ (LLp)

```
min_Y <WR, Y>

s.t.
(1) Î£_i Y_{i,j} â‰¥ Ï†j, âˆ€j âˆˆ [m]   (æ‹’ç»èƒ½åŠ›)
(2) Y_{i,j} â‰¤ 1 - Z_{i,j}, âˆ€i,j  (ä¸å¯åˆ†é…æè®®çš„)
(3) Y âˆˆ B^(nÃ—m)                   (äºŒè¿›åˆ¶å˜é‡)
```

### 3.2 ç­‰ä»·æ€§å®šç†

**å®šç†1 (LPç­‰ä»·æ€§)**ï¼šå¯¹äºä»»æ„Z âˆˆ B^(mn)ï¼Œæ¾å¼›åçš„LPé—®é¢˜ä¸åŸå§‹ILPé—®é¢˜å…·æœ‰ç›¸åŒçš„æœ€ä¼˜å€¼ã€‚

**è¯æ˜æ ¸å¿ƒ**ï¼š
1. åˆ©ç”¨æ’åºä¸ç­‰å¼ï¼ˆLemma 1ï¼‰
2. æ„é€ è¾…åŠ©å˜é‡Yï¼Œå°†è¿ç»­è§£è½¬åŒ–ä¸ºäºŒè¿›åˆ¶è§£
3. è¯æ˜ç›®æ ‡å‡½æ•°å€¼ä¸å˜

### 3.3 è§£çš„å­˜åœ¨æ€§æ¡ä»¶

**å®šç†3 (å­˜åœ¨æ€§)**ï¼šå¦‚æœæ»¡è¶³æ¡ä»¶
```
max_j Ï†j + 2 max_j Uj â‰¤ n
```
åˆ™é—®é¢˜å­˜åœ¨å¯è¡Œè§£ã€‚

**ç›´è§‚è§£é‡Š**ï¼šå®¡ç¨¿äººçš„æ‹’ç»èƒ½åŠ›å’Œå®¡ç¨¿å®¹é‡å¿…é¡»ä¸è®ºæ–‡æ•°é‡ç›¸åŒ¹é…ã€‚

### 3.4 è´ªå¿ƒå¯å‘å¼ç®—æ³•

```python
def greedy_heuristic(WE, WR, l, u, U, phi):
    """
    è´ªå¿ƒå¯å‘å¼æ±‚è§£åŒå±‚åŒè¡Œè¯„å®¡é—®é¢˜

    å‚æ•°:
        WE: ç¼–è¾‘è´¨é‡çŸ©é˜µ (n, m)
        WR: å®¡ç¨¿äººåŠªåŠ›çŸ©é˜µ (n, m)
        l, u: è®ºæ–‡å®¡ç¨¿æ•°é‡ä¸‹é™/ä¸Šé™
        U: å®¡ç¨¿äººå®¹é‡
        phi: å®¡ç¨¿äººæ‹’ç»èƒ½åŠ›

    è¿”å›:
        X: æœ€ç»ˆåˆ†é…æ–¹æ¡ˆ
        Y: å®¡ç¨¿äººæ‹’ç»æ–¹æ¡ˆ
        Z: ç¼–è¾‘æè®®æ–¹æ¡ˆ
    """
    n, m = WE.shape

    # æ­¥éª¤1: æ„å»ºç¼–è¾‘æè®®
    Z = solve_assignment_ILP(WE, l, u, U)

    # æ­¥éª¤2: è·å–å®¡ç¨¿äººå“åº”
    Y = solve_reviewer_response_ILP(WR, Z, U, phi)

    # æ­¥éª¤3: è®¡ç®—æœ€ç»ˆåˆ†é…
    X = solve_matching_ILP(Z, Y, l, u, U)

    return X, Y, Z


def solve_assignment_ILP(W, l, u, U):
    """æ±‚è§£ç¼–è¾‘åˆ†é…ILP"""
    n, m = W.shape

    # ILP: max <W, Z>
    # s.t. li â‰¤ Î£j Zi,j â‰¤ ui
    #      Î£i Zi,j â‰¤ Uj
    #      Z âˆˆ {0,1}^(nÃ—m)

    # ä½¿ç”¨åŒˆç‰™åˆ©ç®—æ³•æˆ–ILPæ±‚è§£å™¨
    import scipy.optimize as opt

    c = -W.flatten()  # æœ€å¤§åŒ–è½¬ä¸ºæœ€å°åŒ–
    # ... æ„å»ºçº¦æŸçŸ©é˜µ
    # ... æ±‚è§£

    return Z.reshape(n, m)


def solve_reviewer_response_ILP(WR, Z, U, phi):
    """æ±‚è§£å®¡ç¨¿äººå“åº”ILP"""
    n, m = WR.shape

    # ILP: min <WR, Y>
    # s.t. Î£i Yi,j â‰¥ Ï†j
    #      Yi,j â‰¤ 1 - Zi,j
    #      Î£i Yi,j â‰¤ Uj
    #      Y âˆˆ {0,1}^(nÃ—m)

    return Y
```

### 3.5 å…¬å¹³æ€§å®šä¹‰

**Î¦-å¼±å…¬å¹³æ€§**ï¼š
```
Xæ˜¯Î¦-å¼±å…¬å¹³çš„ï¼Œå¦‚æœå¯¹äºæ‰€æœ‰jâˆˆ[m]ï¼Œ
é›†åˆBCj(X) = {iâˆˆ[n]: Xi,j=0 & (WR)i,j â‰¥ min_Xi,j=1(WR)i,j}
è‡³å°‘åŒ…å«Ï†jä¸ªå…ƒç´ 
```

**ç›´è§‚è§£é‡Š**ï¼šæ²¡æœ‰å®¡ç¨¿äººä¼šè¢«åˆ†é…å…¶Ï†jä¸ªæœ€ä¸æ„¿æ„å®¡çš„è®ºæ–‡ã€‚

---

## ğŸ§ª å®éªŒä¸ç»“æœ

### æ•°æ®é›†

| æ•°æ®é›† | è®ºæ–‡æ•° | å®¡ç¨¿äººæ•° | ä¸»é¢˜ç»´åº¦ |
|--------|--------|----------|---------|
| UIUC SIGIR 2007 | 73 | 189 | 25 |

### ç”Ÿæˆæ•°æ®é›†

1. **Alignedæ•°æ®é›†**ï¼šWRä¸WEçº¿æ€§ç›¸å…³
2. **Randomæ•°æ®é›†**ï¼šWRéšæœºç”Ÿæˆï¼ˆå‡åŒ€åˆ†å¸ƒ/æŒ‡æ•°åˆ†å¸ƒï¼‰

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å…¬å¼ | è¯´æ˜ |
|------|------|------|
| QP | Q(X)/Q(X_ILP) | è´¨é‡ç™¾åˆ†æ¯” |
| RAER | R(X_BP)/R(X_ILP) | å¹³å‡åŠªåŠ›æ¯” |
| FR | Î¸(X_BP)/Î¸(X_ILP) | æ–¹å·®æ¯” |
| AC | <X,Y>/<X,X> | ç¬¦åˆåº¦ |

### Alignedåœºæ™¯ç»“æœ

| å‚æ•°è®¾ç½® | QP(XBP) | RAER(XBP,XILP) | FR(XBP,XILP) |
|---------|---------|---------------|---------------|
| Ï†=4, Ïƒ=0.1 | 0.99 | 0.89 | 0.65 |
| Ï†=6, Ïƒ=0.1 | 0.99 | 0.89 | 0.75 |
| Ï†=8, Ïƒ=0.1 | 0.99 | 0.86 | 0.57 |

**å…³é”®å‘ç°**ï¼š
- QPä¿æŒ99%ï¼šè´¨é‡å‡ ä¹æ— æŸ
- RAERé™è‡³86-89%ï¼šå®¡ç¨¿äººåŠªåŠ›æ˜¾è‘—é™ä½
- FRé™è‡³57-75%ï¼šæ–¹å·®é™ä½25-43%

### Randomåœºæ™¯ç»“æœ

| å‚æ•°è®¾ç½® | QP(XBP) | RAER(XBP,XILP) | FR(XBP,XILP) |
|---------|---------|---------------|---------------|
| Ï†=4, Exp(0.5) | 0.96 | 0.45 | 0.16 |
| Ï†=6, Exp(0.5) | 0.95 | 0.35 | 0.09 |
| Ï†=8, Exp(0.5) | 0.93 | 0.30 | 0.07 |

**æƒŠäººå‘ç°**ï¼š
- åŠªåŠ›å¯é™ä½è‡³30-47%
- æ–¹å·®å¯é™ä½è‡³7-16%ï¼ˆæå‡6-14å€ï¼‰

---

## ğŸ“ˆ æŠ€æœ¯æ¼”è¿›è„‰ç»œ

```
ä¼ ç»Ÿè¯„å®¡åˆ†é…
  â†“ æ‰‹å·¥åˆ†é…
  â†“ ç®€å•ILP
åŒå±‚è§„åˆ’æ¡†æ¶ (æœ¬æ–‡)
  â†“ ç¼–è¾‘-å®¡ç¨¿äººåšå¼ˆå»ºæ¨¡
  â†“ è´ªå¿ƒå¯å‘å¼
  â†“ å…¬å¹³æ€§çº¦æŸ
æœªæ¥æ–¹å‘
  â†“ å¤§è§„æ¨¡åˆ†å¸ƒå¼ä¼˜åŒ–
  â†“ åœ¨çº¿å­¦ä¹ è°ƒæ•´
  â†“ å¤šç›®æ ‡æ‰©å±•
```

---

## ğŸ”— ä¸Šä¸‹æ¸¸å…³ç³»

### ä¸Šæ¸¸ä¾èµ–

- **åŒå±‚è§„åˆ’ç†è®º**ï¼šä¼˜åŒ–ç†è®ºåŸºç¡€
- **åŒ¹é…ç†è®º**ï¼šåˆ†é…é—®é¢˜å»ºæ¨¡
- **åšå¼ˆè®º**ï¼šå¤šæ–¹ä¼˜åŒ–æ¡†æ¶

### ä¸‹æ¸¸å½±å“

- æ¨åŠ¨å…¬å¹³è¯„å®¡åˆ†é…æ–¹æ³•å‘å±•
- ä¸ºå…¶ä»–åŒ¹é…é—®é¢˜æä¾›åŒå±‚å»ºæ¨¡æ€è·¯

---

## âš™ï¸ å¯å¤ç°æ€§åˆ†æ

### ç®—æ³•å¤æ‚åº¦

| æ­¥éª¤ | å¤æ‚åº¦ | è¯´æ˜ |
|------|--------|------|
| ç¼–è¾‘æè®®ILP | O(T_ILP) | æ ‡å‡†åˆ†é…é—®é¢˜ |
| å®¡ç¨¿äººå“åº”ILP | O(T_ILP) | æ ‡å‡†åˆ†é…é—®é¢˜ |
| æœ€ç»ˆåŒ¹é…ILP | O(T_ILP) | æ ‡å‡†åˆ†é…é—®é¢˜ |
| **æ€»è®¡** | O(3Â·T_ILP) | ä¸‰æ¬¡ILPæ±‚è§£ |

### å‚æ•°æ•æ„Ÿæ€§

| å‚æ•° | å½±å“ | æ¨èå€¼ |
|------|------|--------|
| Ï† (æ‹’ç»èƒ½åŠ›) | æ–¹å·®éšÏ†å¢å¤§è€Œå‡å° | 4-8 |
| Ïƒ (è´¨é‡é˜ˆå€¼) | è´¨é‡ä¸æ–¹å·®æƒè¡¡ | 0.1 |

---

## ğŸ“š å…³é”®å‚è€ƒæ–‡çŒ®

1. Dempe, S. "Foundations of Bilevel Programming." 2002.
2. Charlin, L. "The Birkhoff Polytope and Grothendieck's Inequality." 2014.
3. Kolasa, T. "Peer-Review Matching." 2020.

---

## ğŸ’» ä»£ç å®ç°è¦ç‚¹

```python
import numpy as np
from scipy.optimize import linear_sum_assignment

class BilevelPeerReview:
    """åŒå±‚è§„åˆ’åŒè¡Œè¯„å®¡åˆ†é…ç³»ç»Ÿ"""

    def __init__(self, num_papers, num_reviewers,
                 min_reviews=3, max_reviews=5,
                 reviewer_capacity=6, freedom=4):
        self.n = num_papers
        self.m = num_reviewers
        self.l = min_reviews
        self.u = max_reviews
        self.U = np.full(num_reviewers, reviewer_capacity)
        self.phi = np.full(num_reviewers, freedom)

    def solve(self, quality_matrix, effort_matrix):
        """
        æ±‚è§£åŒå±‚åŒè¡Œè¯„å®¡é—®é¢˜

        å‚æ•°:
            quality_matrix: ç¼–è¾‘è§†è§’è´¨é‡ (n, m)
            effort_matrix: å®¡ç¨¿äººåŠªåŠ›çŸ©é˜µ (n, m)

        è¿”å›:
            X: æœ€ç»ˆåˆ†é…æ–¹æ¡ˆ
            metrics: æ€§èƒ½æŒ‡æ ‡
        """
        # æ­¥éª¤1: ç¼–è¾‘æè®®
        Z = self._editor_proposal(quality_matrix)

        # æ­¥éª¤2: å®¡ç¨¿äººå“åº”
        Y = self._reviewer_response(effort_matrix, Z)

        # æ­¥éª¤3: æœ€ç»ˆåŒ¹é…
        X = self._final_matching(Z, Y, quality_matrix)

        # è®¡ç®—æŒ‡æ ‡
        metrics = self._compute_metrics(X, Y, Z, quality_matrix, effort_matrix)

        return X, metrics

    def _editor_proposal(self, W):
        """ç¼–è¾‘æè®®ï¼šæœ€å¤§åŒ–è´¨é‡"""
        # è½¬æ¢ä¸ºæœ€å°åŒ–é—®é¢˜
        cost = -W

        # åŒˆç‰™åˆ©ç®—æ³•
        row_ind, col_ind = linear_sum_assignment(cost)

        # æ„å»ºåˆ†é…çŸ©é˜µ
        Z = np.zeros((self.n, self.m), dtype=int)
        for i, j in zip(row_ind, col_ind):
            if i < self.n:
                Z[i, j] = 1

        # è°ƒæ•´ä»¥æ»¡è¶³çº¦æŸ
        Z = self._adjust_constraints(Z)

        return Z

    def _reviewer_response(self, WR, Z):
        """å®¡ç¨¿äººå“åº”ï¼šæœ€å°åŒ–åŠªåŠ›"""
        Y = np.zeros((self.n, self.m), dtype=int)

        for j in range(self.m):
            # è·å–å®¡ç¨¿äººjå¯æ‹’ç»çš„è®ºæ–‡
            available = np.where(Z[:, j] == 0)[0]

            # æŒ‰åŠªåŠ›æ’åºï¼ˆé«˜åŠªåŠ›ä¼˜å…ˆæ‹’ç»ï¼‰
            efforts = WR[available, j]
            sorted_indices = available[np.argsort(-efforts)]

            # æ‹’ç»phi[j]ä¸ª
            for i in sorted_indices[:self.phi[j]]:
                Y[i, j] = 1

        return Y

    def _final_matching(self, Z, Y, W):
        """æœ€ç»ˆåŒ¹é…ï¼šåœ¨Zå’ŒYçº¦æŸä¸‹æœ€å¤§åŒ–è´¨é‡"""
        # æœ‰æ•ˆåˆ†é…ï¼šZä¸­æè®®ä¸”Yä¸­æœªæ‹’ç»çš„
        valid = (Z == 1) & (Y == 0)

        # æ„å»ºæœ‰æ•ˆè´¨é‡çŸ©é˜µ
        W_valid = W.copy()
        W_valid[~valid] = -np.inf

        # åŒˆç‰™åˆ©ç®—æ³•
        cost = -W_valid
        row_ind, col_ind = linear_sum_assignment(cost)

        # æ„å»ºæœ€ç»ˆåˆ†é…
        X = np.zeros((self.n, self.m), dtype=int)
        for i, j in zip(row_ind, col_ind):
            if i < self.n and W_valid[i, j] > -np.inf:
                X[i, j] = 1

        # è°ƒæ•´ä»¥æ»¡è¶³çº¦æŸ
        X = self._adjust_constraints(X)

        return X

    def _adjust_constraints(self, X):
        """è°ƒæ•´åˆ†é…ä»¥æ»¡è¶³æ•°é‡çº¦æŸ"""
        for i in range(self.n):
            assigned = X[i, :].sum()
            if assigned < self.l:
                # éœ€è¦å¢åŠ åˆ†é…
                needed = self.l - assigned
                available = np.where(X[i, :] == 0)[0]
                # é€‰æ‹©è´Ÿè½½æœ€ä½çš„å®¡ç¨¿äºº
                loads = X.sum(axis=0)
                candidates = available[loads[available] < self.U[available]]
                for j in candidates[:needed]:
                    X[i, j] = 1
            elif assigned > self.u:
                # éœ€è¦å‡å°‘åˆ†é…
                excess = assigned - self.u
                assigned_reviewers = np.where(X[i, :] == 1)[0]
                for j in assigned_reviewers[:excess]:
                    X[i, j] = 0

        return X

    def _compute_metrics(self, X, Y, Z, W, WR):
        """è®¡ç®—æ€§èƒ½æŒ‡æ ‡"""
        # è´¨é‡å¾—åˆ†
        quality = np.sum(W * X)

        # å¹³å‡åŠªåŠ›
        avg_effort = np.sum(WR * X) / np.sum(X)

        # åŠªåŠ›æ–¹å·®
        efforts = np.sum(WR * X, axis=0)
        efforts = efforts[np.sum(X, axis=0) > 0]  # åªè®¡ç®—æœ‰åˆ†é…çš„
        effort_variance = np.var(efforts) if len(efforts) > 0 else 0

        # å®¡ç¨¿äººè´Ÿè½½
        loads = np.sum(X, axis=1)
        load_variance = np.var(loads)

        # ç¬¦åˆåº¦
        compliance = np.sum(X * Y) / np.sum(X) if np.sum(X) > 0 else 0

        return {
            'quality': quality,
            'avg_effort': avg_effort,
            'effort_variance': effort_variance,
            'load_variance': load_variance,
            'compliance': compliance
        }


# ä½¿ç”¨ç¤ºä¾‹
def solve_peer_review_example():
    """ç¤ºä¾‹ï¼šæ±‚è§£åŒè¡Œè¯„å®¡åˆ†é…"""
    # é—®é¢˜è§„æ¨¡
    n_papers = 73
    n_reviewers = 189

    # ç”Ÿæˆéšæœºè´¨é‡çŸ©é˜µå’ŒåŠªåŠ›çŸ©é˜µ
    np.random.seed(42)
    quality_matrix = np.random.rand(n_papers, n_reviewers)

    # Alignedåœºæ™¯ï¼šåŠªåŠ›ä¸è´¨é‡è´Ÿç›¸å…³
    effort_matrix = 1 - quality_matrix

    # åˆ›å»ºæ±‚è§£å™¨
    solver = BilevelPeerReview(
        num_papers=n_papers,
        num_reviewers=n_reviewers,
        min_reviews=3,
        max_reviews=5,
        reviewer_capacity=6,
        freedom=4
    )

    # æ±‚è§£
    X, metrics = solver.solve(quality_matrix, effort_matrix)

    print("=== åŒè¡Œè¯„å®¡åˆ†é…ç»“æœ ===")
    print(f"è´¨é‡å¾—åˆ†: {metrics['quality']:.2f}")
    print(f"å¹³å‡åŠªåŠ›: {metrics['avg_effort']:.4f}")
    print(f"åŠªåŠ›æ–¹å·®: {metrics['effort_variance']:.4f}")
    print(f"è´Ÿè½½æ–¹å·®: {metrics['load_variance']:.4f}")
    print(f"ç¬¦åˆåº¦: {metrics['compliance']:.4f}")

    # åˆ†é…ç»Ÿè®¡
    paper_assignments = np.sum(X, axis=1)
    reviewer_assignments = np.sum(X, axis=0)

    print(f"\nè®ºæ–‡åˆ†é…ç»Ÿè®¡: min={paper_assignments.min()}, "
          f"max={paper_assignments.max()}, "
          f"mean={paper_assignments.mean():.2f}")
    print(f"å®¡ç¨¿äººåˆ†é…ç»Ÿè®¡: min={reviewer_assignments.min()}, "
          f"max={reviewer_assignments.max()}, "
          f"mean={reviewer_assignments.mean():.2f}")

    return X, metrics


if __name__ == "__main__":
    solve_peer_review_example()
```

---

## ğŸŒŸ åº”ç”¨ä¸å½±å“

### åº”ç”¨åœºæ™¯

1. **å­¦æœ¯ä¼šè®®ç»„ç»‡**
   - è‡ªåŠ¨åŒ–å®¡ç¨¿åˆ†é…
   - é™ä½ç¼–è¾‘å·¥ä½œé‡
   - æå‡å®¡ç¨¿å…¬å¹³æ€§

2. **æœŸåˆŠå®¡ç¨¿ç³»ç»Ÿ**
   - å¤§è§„æ¨¡ç¨¿ä»¶å¤„ç†
   - å®¡ç¨¿äººè´Ÿè½½å‡è¡¡
   - ä¸“ä¸šåŒ¹é…ä¼˜åŒ–

3. **åŸºé‡‘è¯„å®¡**
   - é¡¹ç›®åˆ†é…ä¼˜åŒ–
   - è¯„å®¡ä¸“å®¶åŒ¹é…

### å•†ä¸šæ½œåŠ›

- **å­¦æœ¯å‡ºç‰ˆ**ï¼šæå‡è¯„å®¡è´¨é‡
- **ä¼šè®®ç»„ç»‡**ï¼šé™ä½è¿è¥æˆæœ¬
- **ç§‘ç ”ç®¡ç†**ï¼šä¼˜åŒ–èµ„æºé…ç½®

---

## â“ æœªè§£é—®é¢˜ä¸å±•æœ›

### å±€é™æ€§

1. **å¯æ‰©å±•æ€§**ï¼šå¤§è§„æ¨¡é—®é¢˜çš„æ•ˆç‡æœªéªŒè¯
2. **åŠ¨æ€åœºæ™¯**ï¼šä¸æ”¯æŒå¢é‡æ›´æ–°
3. **å¤šç›®æ ‡**ï¼šæœªè€ƒè™‘å®¡ç¨¿äººä¸“ä¸šåº¦çš„åŠ¨æ€è¯„ä¼°

### æœªæ¥æ–¹å‘

1. **å¤§è§„æ¨¡æ‰©å±•**ï¼šç ”ç©¶åˆ†å¸ƒå¼ä¼˜åŒ–ç®—æ³•
2. **åœ¨çº¿å­¦ä¹ **ï¼šåŸºäºåé¦ˆåŠ¨æ€è°ƒæ•´è´¨é‡çŸ©é˜µ
3. **å¤šç›®æ ‡ä¼˜åŒ–**ï¼šåŒæ—¶ä¼˜åŒ–è´¨é‡ã€å…¬å¹³æ€§å’Œå¤šæ ·æ€§
4. **è·¨ä¼šè®®è¿ç§»**ï¼šåˆ©ç”¨å†å²æ•°æ®é¢„è®­ç»ƒæ¨¡å‹

---

## ğŸ“ åˆ†æç¬”è®°

```
ä¸ªäººç†è§£ï¼š

1. æ ¸å¿ƒåˆ›æ–°ï¼š
   - é¦–æ¬¡åŒå±‚è§„åˆ’å»ºæ¨¡åŒè¡Œè¯„å®¡
   - åšå¼ˆå…³ç³»å½¢å¼åŒ–æ¸…æ™°
   - è´ªå¿ƒå¯å‘å¼ç®€å•æœ‰æ•ˆ

2. æŠ€æœ¯äº®ç‚¹ï¼š
   - æ–¹å·®é™ä½é«˜è¾¾14å€
   - è´¨é‡ä¿æŒ99%
   - ç†è®ºåˆ†æä¸å®éªŒä¸€è‡´

3. å®ç”¨ä»·å€¼ï¼š
   - ç›´æ¥åº”ç”¨äºä¼šè®®ç»„ç»‡
   - å¯é›†æˆç°æœ‰ç³»ç»Ÿ
   - ä»£ç å®ç°ç®€æ´

4. æ”¹è¿›ç©ºé—´ï¼š
   - å¤§è§„æ¨¡ç®—æ³•ä¼˜åŒ–
   - åœ¨çº¿å­¦ä¹ æœºåˆ¶
   - å¤šç›®æ ‡æƒè¡¡
```

---

## ç»¼åˆè¯„åˆ†

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| ç†è®ºæ·±åº¦ | â˜…â˜…â˜…â˜…â˜† | åŒå±‚è§„åˆ’ç†è®ºå®Œæ•´ |
| æ–¹æ³•åˆ›æ–° | â˜…â˜…â˜…â˜…â˜… | é¦–æ¬¡æå‡ºè¯¥æ¡†æ¶ |
| å®ç°éš¾åº¦ | â˜…â˜…â˜…â˜†â˜† | ç®—æ³•æ¸…æ™° |
| åº”ç”¨ä»·å€¼ | â˜…â˜…â˜…â˜…â˜… | ä¼šè®®éœ€æ±‚å¼º |
| è®ºæ–‡è´¨é‡ | â˜…â˜…â˜…â˜…â˜† | è¯æ˜å®éªŒå……åˆ† |

**æ€»åˆ†ï¼šâ˜…â˜…â˜…â˜…â˜† (4.2/5.0)**

---

*æœ¬ç¬”è®°ç”±5-Agentè¾©è®ºåˆ†æç³»ç»Ÿç”Ÿæˆï¼Œç»“åˆäº†å¤šæ™ºèƒ½ä½“ç²¾è¯»æŠ¥å‘Šå†…å®¹ã€‚*
