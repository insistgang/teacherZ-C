<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>快速开始 - XCAI API 文档</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <h1>XCAI</h1>
            <p class="version">版本 0.1.0</p>
            
            <div class="search-box">
                <input type="text" id="search-input" placeholder="搜索 API...">
                <div id="search-results"></div>
            </div>
            
            <nav>
                <h3>开始</h3>
                <ul>
                    <li><a href="../index.html">概述</a></li>
                    <li><a href="basic_usage.html" class="active">快速开始</a></li>
                    <li><a href="advanced_usage.html">高级用法</a></li>
                </ul>
                
                <h3>模块</h3>
                <ul>
                    <li><a href="../modules/denoising.html">xcrai.denoising</a></li>
                    <li><a href="../modules/segmentation.html">xcrai.segmentation</a></li>
                    <li><a href="../modules/tensor.html">xcrai.tensor</a></li>
                    <li><a href="../modules/pointcloud.html">xcrai.pointcloud</a></li>
                    <li><a href="../modules/peft.html">xcrai.peft</a></li>
                </ul>
            </nav>
        </aside>
        
        <main class="main-content">
            <header class="page-header">
                <h1>快速开始</h1>
                <p class="breadcrumb">
                    <a href="../index.html">Home</a> / <a href="basic_usage.html">快速开始</a>
                </p>
            </header>
            
            <section class="section">
                <h2>安装</h2>
                
                <p>使用 pip 安装 XCAI：</p>
                
                <div class="example-box">
                    <pre>
pip install xcai
                    </pre>
                </div>
                
                <p>或者从源码安装：</p>
                
                <div class="example-box">
                    <pre>
git clone https://github.com/xcai/xcai.git
cd xcai
pip install -e .
                    </pre>
                </div>
            </section>
            
            <section class="section">
                <h2>图像去噪</h2>
                
                <h3>基本用法</h3>
                
                <div class="example-box">
                    <pre>
<span class="keyword">import</span> numpy <span class="keyword">as</span> np
<span class="keyword">from</span> xcai.denoising <span class="keyword">import</span> ROFDenoiser

<span class="comment"># 加载含噪图像 (假设像素值范围 [0, 1])</span>
noisy_image = np.<span class="function">load</span>(<span class="string">'noisy_image.npy'</span>)

<span class="comment"># 创建去噪器</span>
denoiser = <span class="function">ROFDenoiser</span>(
    lambda_param=<span class="string">0.1</span>,      <span class="comment"># 正则化强度</span>
    method=<span class="string">'chambolle'</span>,   <span class="comment"># 使用 Chambolle 算法</span>
    n_iter=<span class="string">100</span>            <span class="comment"># 迭代次数</span>
)

<span class="comment"># 执行去噪</span>
clean_image = denoiser.<span class="function">denoise</span>(noisy_image)

<span class="comment"># 保存结果</span>
np.<span class="function">save</span>(<span class="string">'clean_image.npy'</span>, clean_image)
                    </pre>
                </div>
                
                <h3>调整参数</h3>
                
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.denoising <span class="keyword">import</span> ROFDenoiser, TVLDenoiser, NLMDenoiser

<span class="comment"># 不同强度的去噪</span>
weak_denoiser = <span class="function">ROFDenoiser</span>(lambda_param=<span class="string">0.05</span>)   <span class="comment"># 轻度去噪</span>
medium_denoiser = <span class="function">ROFDenoiser</span>(lambda_param=<span class="string">0.1</span>)   <span class="comment"># 中度去噪</span>
strong_denoiser = <span class="function">ROFDenoiser</span>(lambda_param=<span class="string">0.3</span>)   <span class="comment"># 强力去噪</span>

<span class="comment"># 使用不同算法</span>
tv1_denoiser = <span class="function">TVLDenoiser</span>(lambda_param=<span class="string">0.15</span>)  <span class="comment"># TV-L1 模型</span>
nlm_denoiser = <span class="function">NLMDenoiser</span>(h=<span class="string">0.1</span>)          <span class="comment"># 非局部均值</span>
                    </pre>
                </div>
                
                <div class="note">
                    <h5>参数选择建议</h5>
                    <ul>
                        <li><code>lambda_param</code>: 值越大去噪越强，但可能损失细节。建议从 0.1 开始调整</li>
                        <li><code>method</code>: 'chambolle' 通常效果最好且收敛快</li>
                        <li>对于脉冲噪声，推荐使用 <code>TVLDenoiser</code></li>
                    </ul>
                </div>
            </section>
            
            <section class="section">
                <h2>图像分割</h2>
                
                <h3>光谱-空间分割</h3>
                
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.segmentation <span class="keyword">import</span> SLatSegmenter

<span class="comment"># 加载图像 (支持多光谱/高光谱图像)</span>
image = np.<span class="function">load</span>(<span class="string">'hyperspectral_image.npy'</span>)  <span class="comment"># shape: (H, W, C)</span>

<span class="comment"># 创建分割器</span>
segmenter = <span class="function">SLatSegmenter</span>(
    n_clusters=<span class="string">5</span>,           <span class="comment"># 分割类别数</span>
    spatial_weight=<span class="string">0.3</span>,     <span class="comment"># 空间信息权重</span>
    n_components=<span class="string">10</span>         <span class="comment"># 潜在空间维度</span>
)

<span class="comment"># 训练并预测</span>
labels = segmenter.<span class="function">fit_predict</span>(image)

<span class="comment"># 可视化</span>
<span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt
plt.<span class="function">imshow</span>(labels, cmap=<span class="string">'tab10'</span>)
plt.<span class="function">title</span>(<span class="string">'分割结果'</span>)
plt.<span class="function">show</span>()
                    </pre>
                </div>
                
                <h3>图割分割</h3>
                
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.segmentation <span class="keyword">import</span> GraphCutter

<span class="comment"># 创建图割分割器</span>
cutter = <span class="function">GraphCutter</span>(
    n_segments=<span class="string">200</span>,        <span class="comment"># 初始超像素数</span>
    compactness=<span class="string">15</span>,       <span class="comment"># 紧凑性</span>
    merge_threshold=<span class="string">0.1</span>   <span class="comment"># 合并阈值</span>
)

<span class="comment"># 执行分割</span>
labels = cutter.<span class="function">segment</span>(rgb_image)
                    </pre>
                </div>
            </section>
            
            <section class="section">
                <h2>张量分解</h2>
                
                <h3>Tucker 分解</h3>
                
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.tensor <span class="keyword">import</span> TuckerDecomposer

<span class="comment"># 创建 3D 张量 (例如视频数据)</span>
video_tensor = np.random.<span class="function">rand</span>(<span class="string">100</span>, <span class="string">100</span>, <span class="string">50</span>)  <span class="comment"># (H, W, T)</span>

<span class="comment"># 创建分解器</span>
decomposer = <span class="function">TuckerDecomposer</span>(rank=[<span class="string">20</span>, <span class="string">20</span>, <span class="string">10</span>])

<span class="comment"># 执行分解</span>
core, factors = decomposer.<span class="function">decompose</span>(video_tensor)

<span class="comment"># 查看压缩比</span>
original_size = np.<span class="function">prod</span>(video_tensor.shape)
compressed_size = np.<span class="function">prod</span>(core.shape) + <span class="function">sum</span>(f.size <span class="keyword">for</span> f <span class="keyword">in</span> factors)
<span class="function">print</span>(<span class="string">f'压缩比: {original_size / compressed_size:.2f}x'</span>)

<span class="comment"># 重构</span>
reconstructed = decomposer.<span class="function">reconstruct</span>(core, factors)
                    </pre>
                </div>
                
                <h3>CP 分解</h3>
                
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.tensor <span class="keyword">import</span> CPDecomposer

<span class="comment"># CP 分解 (单一秩参数)</span>
cp_decomposer = <span class="function">CPDecomposer</span>(rank=<span class="string">5</span>)
factors = cp_decomposer.<span class="function">decompose</span>(tensor)
                    </pre>
                </div>
            </section>
            
            <section class="section">
                <h2>点云处理</h2>
                
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.pointcloud <span class="keyword">import</span> PointCloudProcessor

<span class="comment"># 加载点云</span>
pcd = <span class="function">PointCloudProcessor</span>()
pcd.<span class="function">load</span>(<span class="string">'scene.ply'</span>)

<span class="comment"># 下采样</span>
downsampled = pcd.<span class="function">voxel_downsample</span>(voxel_size=<span class="string">0.05</span>)

<span class="comment"># 估计法向量</span>
normals = downsampled.<span class="function">estimate_normals</span>(radius=<span class="string">0.1</span>)

<span class="comment"># 移除离群点</span>
cleaned = downsampled.<span class="function">remove_outliers</span>(nb_points=<span class="string">16</span>, radius=<span class="string">0.5</span>)

<span class="comment"># 保存处理后的点云</span>
cleaned.<span class="function">save</span>(<span class="string">'cleaned_scene.ply'</span>)
                    </pre>
                </div>
            </section>
            
            <section class="section">
                <h2>参数高效微调 (PEFT)</h2>
                
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.peft <span class="keyword">import</span> LoRAConfig, apply_lora
<span class="keyword">from</span> transformers <span class="keyword">import</span> AutoModelForCausalLM, AutoTokenizer

<span class="comment"># 加载预训练模型</span>
model = <span class="function">AutoModelForCausalLM.from_pretrained</span>(<span class="string">'gpt2'</span>)
tokenizer = <span class="function">AutoTokenizer.from_pretrained</span>(<span class="string">'gpt2'</span>)

<span class="comment"># LoRA 配置</span>
config = <span class="function">LoRAConfig</span>(
    r=<span class="string">8</span>,
    alpha=<span class="string">16</span>,
    dropout=<span class="string">0.1</span>,
    target_modules=[<span class="string">'c_attn'</span>]  <span class="comment"># GPT-2 的 attention 层</span>
)

<span class="comment"># 应用 LoRA</span>
model = <span class="function">apply_lora</span>(model, config)

<span class="comment"># 查看参数统计</span>
total_params = <span class="function">sum</span>(p.numel() <span class="keyword">for</span> p <span class="keyword">in</span> model.parameters())
trainable_params = <span class="function">sum</span>(p.numel() <span class="keyword">for</span> p <span class="keyword">in</span> model.parameters() <span class="keyword">if</span> p.requires_grad)
<span class="function">print</span>(<span class="string">f'总参数: {total_params:,}'</span>)
<span class="function">print</span>(<span class="string">f'可训练参数: {trainable_params:,}'</span>)
<span class="function">print</span>(<span class="string">f'可训练比例: {100*trainable_params/total_params:.2f}%'</span>)
                    </pre>
                </div>
            </section>
            
            <section class="section">
                <h2>下一步</h2>
                
                <p>继续学习：</p>
                <ul>
                    <li><a href="advanced_usage.html">高级用法</a> - 深入了解各模块的高级功能</li>
                    <li><a href="../modules/denoising.html">xcrai.denoising</a> - 完整的去噪模块文档</li>
                    <li><a href="../modules/segmentation.html">xcrai.segmentation</a> - 完整的分割模块文档</li>
                </ul>
            </section>
            
            <footer class="footer">
                <p>© 2024 XCAI Team. 基于 Sphinx 风格构建。</p>
            </footer>
        </main>
    </div>
    
    <script src="../js/search.js"></script>
</body>
</html>
