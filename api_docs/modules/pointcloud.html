<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xcrai.pointcloud - XCAI API 文档</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <h1>XCAI</h1>
            <p class="version">版本 0.1.0</p>
            
            <div class="search-box">
                <input type="text" id="search-input" placeholder="搜索 API...">
                <div id="search-results"></div>
            </div>
            
            <nav>
                <h3>开始</h3>
                <ul>
                    <li><a href="../index.html">概述</a></li>
                    <li><a href="../examples/basic_usage.html">快速开始</a></li>
                    <li><a href="../examples/advanced_usage.html">高级用法</a></li>
                </ul>
                
                <h3>模块</h3>
                <ul>
                    <li><a href="denoising.html">xcrai.denoising</a></li>
                    <li><a href="segmentation.html">xcrai.segmentation</a></li>
                    <li><a href="tensor.html">xcrai.tensor</a></li>
                    <li><a href="pointcloud.html" class="active">xcrai.pointcloud</a></li>
                    <li><a href="peft.html">xcrai.peft</a></li>
                </ul>
            </nav>
        </aside>
        
        <main class="main-content">
            <header class="page-header">
                <h1>xcrai.pointcloud</h1>
                <p class="breadcrumb">
                    <a href="../index.html">Home</a> / <a href="pointcloud.html">pointcloud</a>
                </p>
            </header>
            
            <section class="section">
                <h2>模块简介</h2>
                <p><code>xcrai.pointcloud</code> 模块提供了点云数据处理的核心功能，包括点云采样、特征提取、法向量估计、点云配准和分割等操作。该模块支持大规模点云的高效处理。</p>
                
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.pointcloud <span class="keyword">import</span> PointCloudProcessor

<span class="comment"># 加载点云</span>
processor = <span class="function">PointCloudProcessor</span>()
pcd = processor.<span class="function">load</span>(<span class="string">'point_cloud.ply'</span>)

<span class="comment"># 下采样</span>
downsampled = processor.<span class="function">voxel_downsample</span>(voxel_size=<span class="string">0.05</span>)

<span class="comment"># 估计法向量</span>
normals = processor.<span class="function">estimate_normals</span>(radius=<span class="string">0.1</span>)
                    </pre>
                </div>
            </section>
            
            <section class="section" id="pointcloudprocessor">
                <h2>PointCloudProcessor</h2>
                
                <div class="class-def">
                    <code>
class <strong>PointCloudProcessor</strong>(points=None, colors=None, normals=None)
                    </code>
                </div>
                
                <p>点云处理器，提供点云的加载、处理和可视化功能。</p>
                
                <h3>参数</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>默认值</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>points</code></td>
                            <td>ndarray</td>
                            <td>None</td>
                            <td>点云坐标，形状为 (N, 3)</td>
                        </tr>
                        <tr>
                            <td><code>colors</code></td>
                            <td>ndarray</td>
                            <td>None</td>
                            <td>点云颜色，形状为 (N, 3)，范围 [0, 1]</td>
                        </tr>
                        <tr>
                            <td><code>normals</code></td>
                            <td>ndarray</td>
                            <td>None</td>
                            <td>点云法向量，形状为 (N, 3)</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>属性</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>属性名</th>
                            <th>类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>points</code></td>
                            <td>ndarray</td>
                            <td>点云坐标</td>
                        </tr>
                        <tr>
                            <td><code>colors</code></td>
                            <td>ndarray</td>
                            <td>点云颜色</td>
                        </tr>
                        <tr>
                            <td><code>normals</code></td>
                            <td>ndarray</td>
                            <td>点云法向量</td>
                        </tr>
                        <tr>
                            <td><code>n_points</code></td>
                            <td>int</td>
                            <td>点的数量</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>示例</h3>
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.pointcloud <span class="keyword">import</span> PointCloudProcessor
<span class="keyword">import</span> numpy <span class="keyword">as</span> np

<span class="comment"># 从数组创建</span>
points = np.random.<span class="function">rand</span>(<span class="string">10000</span>, <span class="string">3</span>)
processor = <span class="function">PointCloudProcessor</span>(points=points)

<span class="comment"># 或从文件加载</span>
processor = <span class="function">PointCloudProcessor</span>()
processor.<span class="function">load</span>(<span class="string">'scene.ply'</span>)

<span class="comment"># 获取基本信息</span>
<span class="function">print</span>(<span class="string">f'点数: {processor.n_points}'</span>)
                    </pre>
                </div>
                
                <div class="method" id="load">
                    <div class="method-header">
                        <span class="method-name">load(filepath)</span>
                    </div>
                    
                    <p>从文件加载点云数据。</p>
                    
                    <div class="method-signature">
load(filepath)
                    </div>
                    
                    <h4>参数</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>参数名</th>
                                <th>类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>filepath</code></td>
                                <td>str</td>
                                <td>文件路径，支持 .ply, .pcd, .xyz 等格式</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <p><code>self</code> - 返回实例本身</p>
                    </div>
                </div>
                
                <div class="method" id="voxel_downsample">
                    <div class="method-header">
                        <span class="method-name">voxel_downsample(voxel_size)</span>
                    </div>
                    
                    <p>使用体素网格进行下采样。</p>
                    
                    <div class="method-signature">
voxel_downsample(voxel_size)
                    </div>
                    
                    <h4>参数</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>参数名</th>
                                <th>类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>voxel_size</code></td>
                                <td>float</td>
                                <td>体素大小</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <p><code>PointCloudProcessor</code> - 下采样后的新点云实例</p>
                    </div>
                </div>
                
                <div class="method" id="estimate_normals">
                    <div class="method-header">
                        <span class="method-name">estimate_normals(radius=0.1, max_nn=30)</span>
                    </div>
                    
                    <p>估计点云法向量。</p>
                    
                    <div class="method-signature">
estimate_normals(radius=0.1, max_nn=30)
                    </div>
                    
                    <h4>参数</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>参数名</th>
                                <th>类型</th>
                                <th>默认值</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>radius</code></td>
                                <td>float</td>
                                <td>0.1</td>
                                <td>搜索半径</td>
                            </tr>
                            <tr>
                                <td><code>max_nn</code></td>
                                <td>int</td>
                                <td>30</td>
                                <td>最大近邻数</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <p><code>ndarray</code> - 法向量数组，形状 (N, 3)</p>
                    </div>
                </div>
                
                <div class="method">
                    <div class="method-header">
                        <span class="method-name">remove_outliers(nb_points=16, radius=0.5)</span>
                    </div>
                    
                    <p>移除离群点。</p>
                    
                    <h4>参数</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>参数名</th>
                                <th>类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>nb_points</code></td>
                                <td>int</td>
                                <td>半径内最少点数阈值</td>
                            </tr>
                            <tr>
                                <td><code>radius</code></td>
                                <td>float</td>
                                <td>搜索半径</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <section class="section" id="icpregistrator">
                <h2>ICPRegistrator</h2>
                
                <div class="class-def">
                    <code>
class <strong>ICPRegistrator</strong>(max_iter=100, tolerance=1e-6, fitness_threshold=0.9)
                    </code>
                </div>
                
                <p>ICP (Iterative Closest Point) 点云配准器。用于对齐两个点云。</p>
                
                <h3>参数</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>默认值</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>max_iter</code></td>
                            <td>int</td>
                            <td>100</td>
                            <td>最大迭代次数</td>
                        </tr>
                        <tr>
                            <td><code>tolerance</code></td>
                            <td>float</td>
                            <td>1e-6</td>
                            <td>收敛阈值</td>
                        </tr>
                        <tr>
                            <td><code>fitness_threshold</code></td>
                            <td>float</td>
                            <td>0.9</td>
                            <td>配准质量阈值</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>示例</h3>
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.pointcloud <span class="keyword">import</span> ICPRegistrator

registrator = <span class="function">ICPRegistrator</span>(max_iter=<span class="string">50</span>)
result = registrator.<span class="function">register</span>(source_pcd, target_pcd)

<span class="function">print</span>(<span class="string">f'变换矩阵:\n{result.transformation}'</span>)
<span class="function">print</span>(<span class="string">f'配准分数: {result.fitness}'</span>)
                    </pre>
                </div>
                
                <div class="method">
                    <div class="method-header">
                        <span class="method-name">register(source, target, init_transform=None)</span>
                    </div>
                    
                    <p>执行点云配准。</p>
                    
                    <h4>参数</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>参数名</th>
                                <th>类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>source</code></td>
                                <td>PointCloudProcessor</td>
                                <td>源点云</td>
                            </tr>
                            <tr>
                                <td><code>target</code></td>
                                <td>PointCloudProcessor</td>
                                <td>目标点云</td>
                            </tr>
                            <tr>
                                <td><code>init_transform</code></td>
                                <td>ndarray</td>
                                <td>初始变换矩阵 (4x4)，可选</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>名称</th>
                                    <th>类型</th>
                                    <th>描述</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>transformation</code></td>
                                    <td>ndarray</td>
                                    <td>4x4 变换矩阵</td>
                                </tr>
                                <tr>
                                    <td><code>fitness</code></td>
                                    <td>float</td>
                                    <td>配准质量分数</td>
                                </tr>
                                <tr>
                                    <td><code>rmse</code></td>
                                    <td>float</td>
                                    <td>均方根误差</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <section class="section" id="featureextractor">
                <h2>FeatureExtractor</h2>
                
                <div class="class-def">
                    <code>
class <strong>FeatureExtractor</strong>(method='fpfh', radius=0.5)
                    </code>
                </div>
                
                <p>点云特征提取器。支持多种局部特征描述符。</p>
                
                <h3>参数</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>默认值</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>method</code></td>
                            <td>str</td>
                            <td>'fpfh'</td>
                            <td>特征提取方法: 'fpfh', 'pfh', 'shot'</td>
                        </tr>
                        <tr>
                            <td><code>radius</code></td>
                            <td>float</td>
                            <td>0.5</td>
                            <td>特征计算半径</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>示例</h3>
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.pointcloud <span class="keyword">import</span> FeatureExtractor

extractor = <span class="function">FeatureExtractor</span>(method=<span class="string">'fpfh'</span>, radius=<span class="string">0.5</span>)
features = extractor.<span class="function">extract</span>(point_cloud)
                    </pre>
                </div>
            </section>
            
            <div class="seealso">
                <h5>参见</h5>
                <ul>
                    <li><a href="tensor.html">xcrai.tensor</a> - 张量分解模块</li>
                    <li><a href="segmentation.html">xcrai.segmentation</a> - 图像分割模块</li>
                </ul>
            </div>
            
            <footer class="footer">
                <p>© 2024 XCAI Team. 基于 Sphinx 风格构建。</p>
            </footer>
        </main>
    </div>
    
    <script src="../js/search.js"></script>
</body>
</html>
