<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xcrai.denoising - XCAI API 文档</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <h1>XCAI</h1>
            <p class="version">版本 0.1.0</p>
            
            <div class="search-box">
                <input type="text" id="search-input" placeholder="搜索 API...">
                <div id="search-results"></div>
            </div>
            
            <nav>
                <h3>开始</h3>
                <ul>
                    <li><a href="../index.html">概述</a></li>
                    <li><a href="../examples/basic_usage.html">快速开始</a></li>
                    <li><a href="../examples/advanced_usage.html">高级用法</a></li>
                </ul>
                
                <h3>模块</h3>
                <ul>
                    <li><a href="denoising.html" class="active">xcrai.denoising</a></li>
                    <li><a href="segmentation.html">xcrai.segmentation</a></li>
                    <li><a href="tensor.html">xcrai.tensor</a></li>
                    <li><a href="pointcloud.html">xcrai.pointcloud</a></li>
                    <li><a href="peft.html">xcrai.peft</a></li>
                </ul>
            </nav>
        </aside>
        
        <main class="main-content">
            <header class="page-header">
                <h1>xcrai.denoising</h1>
                <p class="breadcrumb">
                    <a href="../index.html">Home</a> / <a href="denoising.html">denoising</a>
                </p>
            </header>
            
            <section class="section">
                <h2>模块简介</h2>
                <p><code>xcrai.denoising</code> 模块提供了多种基于变分方法和非线性滤波的图像去噪算法。该模块实现了经典的 ROF (Rudin-Osher-Fatemi) 模型、TV-L1 模型以及非局部均值 (NLM) 等去噪方法。</p>
                
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.denoising <span class="keyword">import</span> ROFDenoiser, TVLDenoiser, NLMDenoiser
<span class="keyword">import</span> numpy <span class="keyword">as</span> np

<span class="comment"># 加载含噪图像</span>
noisy_image = np.<span class="function">load</span>(<span class="string">'noisy.npy'</span>)

<span class="comment"># ROF 去噪</span>
rof = <span class="function">ROFDenoiser</span>(lambda_param=<span class="string">0.1</span>)
clean_rof = rof.<span class="function">denoise</span>(noisy_image)
                    </pre>
                </div>
            </section>
            
            <section class="section" id="rofdenoiser">
                <h2>ROFDenoiser</h2>
                
                <div class="class-def">
                    <code>
class <strong>ROFDenoiser</strong>(lambda_param=0.1, method='chambolle', n_iter=100, tol=1e-4)
                    </code>
                </div>
                
                <p>ROF (Rudin-Osher-Fatemi) 图像去噪器，基于全变分 (Total Variation) 正则化的经典去噪模型。</p>
                
                <h3>参数</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>默认值</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>lambda_param</code></td>
                            <td>float</td>
                            <td>0.1</td>
                            <td>正则化参数，控制去噪强度。值越大去噪越强，但可能损失细节。</td>
                        </tr>
                        <tr>
                            <td><code>method</code></td>
                            <td>str</td>
                            <td>'chambolle'</td>
                            <td>求解算法，可选: <code>'gradient_descent'</code>, <code>'chambolle'</code>, <code>'primal_dual'</code></td>
                        </tr>
                        <tr>
                            <td><code>n_iter</code></td>
                            <td>int</td>
                            <td>100</td>
                            <td>最大迭代次数</td>
                        </tr>
                        <tr>
                            <td><code>tol</code></td>
                            <td>float</td>
                            <td>1e-4</td>
                            <td>收敛阈值，当变化小于此值时停止迭代</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="note">
                    <h5>算法说明</h5>
                    <p>ROF 模型通过最小化以下能量函数实现去噪：</p>
                    <p style="text-align:center; margin: 15px 0;">
                        <code>min_u ||u - f||² + λ·TV(u)</code>
                    </p>
                    <p>其中 f 是含噪图像，u 是去噪结果，TV(u) 是全变分正则项。</p>
                </div>
                
                <h3>示例</h3>
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.denoising <span class="keyword">import</span> ROFDenoiser
<span class="keyword">import</span> numpy <span class="keyword">as</span> np

<span class="comment"># 创建去噪器</span>
denoiser = <span class="function">ROFDenoiser</span>(
    lambda_param=<span class="string">0.15</span>,
    method=<span class="string">'chambolle'</span>,
    n_iter=<span class="string">200</span>
)

<span class="comment"># 执行去噪</span>
clean_image = denoiser.<span class="function">denoise</span>(noisy_image)
                    </pre>
                </div>
                
                <div class="method" id="denoise">
                    <div class="method-header">
                        <span class="method-name">denoise(image)</span>
                    </div>
                    
                    <p>对输入图像执行去噪操作。</p>
                    
                    <div class="method-signature">
denoise(image)
                    </div>
                    
                    <h4>参数</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>参数名</th>
                                <th>类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>image</code></td>
                                <td>ndarray</td>
                                <td>输入图像，数值范围应为 [0, 1]，支持 2D (灰度) 或 3D (彩色) 图像</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>名称</th>
                                    <th>类型</th>
                                    <th>描述</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>u</code></td>
                                    <td>ndarray</td>
                                    <td>去噪后的图像，与输入图像形状相同</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="method" id="set_params">
                    <div class="method-header">
                        <span class="method-name">set_params(**params)</span>
                    </div>
                    
                    <p>动态设置去噪器参数。</p>
                    
                    <div class="method-signature">
set_params(**params)
                    </div>
                    
                    <h4>参数</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>参数名</th>
                                <th>类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>**params</code></td>
                                <td>dict</td>
                                <td>要设置的参数，如 <code>lambda_param=0.2</code></td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <p><code>self</code> - 返回实例本身，支持链式调用</p>
                    </div>
                </div>
                
                <div class="references">
                    <h5>参考文献</h5>
                    <ol>
                        <li>Rudin, L. I., Osher, S., & Fatemi, E. (1992). Nonlinear total variation based noise removal algorithms. <em>Physica D</em>, 60(1-4), 259-268.</li>
                        <li>Chambolle, A. (2004). An algorithm for total variation minimization and applications. <em>Journal of Mathematical Imaging and Vision</em>, 20(1), 89-97.</li>
                    </ol>
                </div>
            </section>
            
            <section class="section" id="tvldenoiser">
                <h2>TVLDenoiser</h2>
                
                <div class="class-def">
                    <code>
class <strong>TVLDenoiser</strong>(lambda_param=0.1, n_iter=100, tol=1e-4)
                    </code>
                </div>
                
                <p>TV-L1 图像去噪器，使用 L1 范数作为数据保真项，相比 ROF 模型对脉冲噪声更鲁棒。</p>
                
                <h3>参数</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>默认值</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>lambda_param</code></td>
                            <td>float</td>
                            <td>0.1</td>
                            <td>正则化参数</td>
                        </tr>
                        <tr>
                            <td><code>n_iter</code></td>
                            <td>int</td>
                            <td>100</td>
                            <td>最大迭代次数</td>
                        </tr>
                        <tr>
                            <td><code>tol</code></td>
                            <td>float</td>
                            <td>1e-4</td>
                            <td>收敛阈值</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>示例</h3>
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.denoising <span class="keyword">import</span> TVLDenoiser

denoiser = <span class="function">TVLDenoiser</span>(lambda_param=<span class="string">0.2</span>)
clean_image = denoiser.<span class="function">denoise</span>(noisy_image)
                    </pre>
                </div>
                
                <div class="method">
                    <div class="method-header">
                        <span class="method-name">denoise(image)</span>
                    </div>
                    <p>执行 TV-L1 去噪。参数和返回值同 <a href="#denoise">ROFDenoiser.denoise()</a>。</p>
                </div>
            </section>
            
            <section class="section" id="nlmdenoiser">
                <h2>NLMDenoiser</h2>
                
                <div class="class-def">
                    <code>
class <strong>NLMDenoiser</strong>(h=0.1, patch_size=7, search_window=21)
                    </code>
                </div>
                
                <p>非局部均值 (Non-Local Means) 图像去噪器。通过搜索图像中的相似块进行加权平均来实现去噪，能更好地保留图像纹理和细节。</p>
                
                <h3>参数</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>默认值</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>h</code></td>
                            <td>float</td>
                            <td>0.1</td>
                            <td>滤波强度参数，控制衰减程度。值越大去噪越强</td>
                        </tr>
                        <tr>
                            <td><code>patch_size</code></td>
                            <td>int</td>
                            <td>7</td>
                            <td>相似性比较的块大小，必须为奇数</td>
                        </tr>
                        <tr>
                            <td><code>search_window</code></td>
                            <td>int</td>
                            <td>21</td>
                            <td>搜索窗口大小，必须为奇数</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="warning">
                    <h5>性能提示</h5>
                    <p>NLM 算法计算复杂度较高，对于大图像建议使用较小的 <code>search_window</code> 或考虑使用 ROF/TV-L1 等更快的算法。</p>
                </div>
                
                <h3>示例</h3>
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.denoising <span class="keyword">import</span> NLMDenoiser

denoiser = <span class="function">NLMDenoiser</span>(h=<span class="string">0.1</span>, patch_size=<span class="string">7</span>, search_window=<span class="string">21</span>)
clean_image = denoiser.<span class="function">denoise</span>(noisy_image)
                    </pre>
                </div>
            </section>
            
            <div class="seealso">
                <h5>参见</h5>
                <ul>
                    <li><a href="segmentation.html">xcrai.segmentation</a> - 图像分割模块</li>
                    <li><a href="tensor.html">xcrai.tensor</a> - 张量分解模块</li>
                    <li><a href="../examples/basic_usage.html">基本用法示例</a></li>
                </ul>
            </div>
            
            <footer class="footer">
                <p>© 2024 XCAI Team. 基于 Sphinx 风格构建。</p>
            </footer>
        </main>
    </div>
    
    <script src="../js/search.js"></script>
</body>
</html>
