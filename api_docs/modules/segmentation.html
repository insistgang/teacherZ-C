<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xcrai.segmentation - XCAI API 文档</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <h1>XCAI</h1>
            <p class="version">版本 0.1.0</p>
            
            <div class="search-box">
                <input type="text" id="search-input" placeholder="搜索 API...">
                <div id="search-results"></div>
            </div>
            
            <nav>
                <h3>开始</h3>
                <ul>
                    <li><a href="../index.html">概述</a></li>
                    <li><a href="../examples/basic_usage.html">快速开始</a></li>
                    <li><a href="../examples/advanced_usage.html">高级用法</a></li>
                </ul>
                
                <h3>模块</h3>
                <ul>
                    <li><a href="denoising.html">xcrai.denoising</a></li>
                    <li><a href="segmentation.html" class="active">xcrai.segmentation</a></li>
                    <li><a href="tensor.html">xcrai.tensor</a></li>
                    <li><a href="pointcloud.html">xcrai.pointcloud</a></li>
                    <li><a href="peft.html">xcrai.peft</a></li>
                </ul>
            </nav>
        </aside>
        
        <main class="main-content">
            <header class="page-header">
                <h1>xcrai.segmentation</h1>
                <p class="breadcrumb">
                    <a href="../index.html">Home</a> / <a href="segmentation.html">segmentation</a>
                </p>
            </header>
            
            <section class="section">
                <h2>模块简介</h2>
                <p><code>xcrai.segmentation</code> 模块提供了多种图像分割算法，包括基于光谱-空间特征的潜在分割方法和图割 (Graph Cut) 分割方法。这些算法特别适用于高光谱图像和遥感图像的分割任务。</p>
                
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.segmentation <span class="keyword">import</span> SLatSegmenter, GraphCutter

<span class="comment"># 光谱-空间分割</span>
segmenter = <span class="function">SLatSegmenter</span>(n_clusters=<span class="string">5</span>)
segmenter.<span class="function">fit</span>(hyperspectral_image)
labels = segmenter.<span class="function">predict</span>(hyperspectral_image)
                    </pre>
                </div>
            </section>
            
            <section class="section" id="slatsegmenter">
                <h2>SLatSegmenter</h2>
                
                <div class="class-def">
                    <code>
class <strong>SLatSegmenter</strong>(n_clusters=5, spatial_weight=0.5, n_components=10, max_iter=100, random_state=None)
                    </code>
                </div>
                
                <p>光谱-空间潜在分割器 (Spectral-Spatial Latent Segmenter)。该算法结合光谱信息和空间上下文进行图像分割，通过潜在空间表示提高分割精度。</p>
                
                <h3>参数</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>默认值</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>n_clusters</code></td>
                            <td>int</td>
                            <td>5</td>
                            <td>分割类别数量</td>
                        </tr>
                        <tr>
                            <td><code>spatial_weight</code></td>
                            <td>float</td>
                            <td>0.5</td>
                            <td>空间信息的权重，范围 [0, 1]。值越大空间约束越强</td>
                        </tr>
                        <tr>
                            <td><code>n_components</code></td>
                            <td>int</td>
                            <td>10</td>
                            <td>潜在空间的维度</td>
                        </tr>
                        <tr>
                            <td><code>max_iter</code></td>
                            <td>int</td>
                            <td>100</td>
                            <td>最大迭代次数</td>
                        </tr>
                        <tr>
                            <td><code>random_state</code></td>
                            <td>int</td>
                            <td>None</td>
                            <td>随机种子，用于结果复现</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>属性</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>属性名</th>
                            <th>类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>cluster_centers_</code></td>
                            <td>ndarray</td>
                            <td>聚类中心坐标</td>
                        </tr>
                        <tr>
                            <td><code>labels_</code></td>
                            <td>ndarray</td>
                            <td>训练数据的分割标签</td>
                        </tr>
                        <tr>
                            <td><code>n_iter_</code></td>
                            <td>int</td>
                            <td>实际迭代次数</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>示例</h3>
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.segmentation <span class="keyword">import</span> SLatSegmenter

<span class="comment"># 创建分割器</span>
segmenter = <span class="function">SLatSegmenter</span>(
    n_clusters=<span class="string">5</span>,
    spatial_weight=<span class="string">0.3</span>,
    n_components=<span class="string">15</span>
)

<span class="comment"># 训练模型</span>
segmenter.<span class="function">fit</span>(image)

<span class="comment"># 获取分割结果</span>
labels = segmenter.<span class="function">predict</span>(image)

<span class="comment"># 获取聚类中心</span>
centers = segmenter.cluster_centers_
                    </pre>
                </div>
                
                <div class="method" id="fit">
                    <div class="method-header">
                        <span class="method-name">fit(X, y=None)</span>
                    </div>
                    
                    <p>训练分割模型。</p>
                    
                    <div class="method-signature">
fit(X, y=None)
                    </div>
                    
                    <h4>参数</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>参数名</th>
                                <th>类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>X</code></td>
                                <td>ndarray</td>
                                <td>输入图像，形状为 (H, W, C) 或 (H, W)</td>
                            </tr>
                            <tr>
                                <td><code>y</code></td>
                                <td>ndarray</td>
                                <td>可选的真实标签，用于半监督学习</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <p><code>self</code> - 返回训练好的实例</p>
                    </div>
                </div>
                
                <div class="method" id="predict">
                    <div class="method-header">
                        <span class="method-name">predict(X)</span>
                    </div>
                    
                    <p>预测图像的分割标签。</p>
                    
                    <div class="method-signature">
predict(X)
                    </div>
                    
                    <h4>参数</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>参数名</th>
                                <th>类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>X</code></td>
                                <td>ndarray</td>
                                <td>输入图像，形状为 (H, W, C) 或 (H, W)</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>名称</th>
                                    <th>类型</th>
                                    <th>描述</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>labels</code></td>
                                    <td>ndarray</td>
                                    <td>分割标签，形状为 (H, W)，值为 [0, n_clusters-1]</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="method" id="fit_predict">
                    <div class="method-header">
                        <span class="method-name">fit_predict(X, y=None)</span>
                    </div>
                    
                    <p>训练模型并返回分割结果，相当于先调用 fit() 再调用 predict()。</p>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <p><code>labels</code> - 分割标签数组</p>
                    </div>
                </div>
            </section>
            
            <section class="section" id="graphcutter">
                <h2>GraphCutter</h2>
                
                <div class="class-def">
                    <code>
class <strong>GraphCutter</strong>(n_segments=100, compactness=10.0, sigma=1.0, merge_threshold=0.1)
                    </code>
                </div>
                
                <p>图割 (Graph Cut) 分割器。首先使用 SLIC 算法生成超像素，然后基于图割算法进行区域合并，得到最终的分割结果。</p>
                
                <h3>参数</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>默认值</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>n_segments</code></td>
                            <td>int</td>
                            <td>100</td>
                            <td>初始超像素数量</td>
                        </tr>
                        <tr>
                            <td><code>compactness</code></td>
                            <td>float</td>
                            <td>10.0</td>
                            <td>SLIC 超像素的紧凑性参数</td>
                        </tr>
                        <tr>
                            <td><code>sigma</code></td>
                            <td>float</td>
                            <td>1.0</td>
                            <td>高斯平滑的核大小</td>
                        </tr>
                        <tr>
                            <td><code>merge_threshold</code></td>
                            <td>float</td>
                            <td>0.1</td>
                            <td>区域合并的相似性阈值</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>示例</h3>
                <div class="example-box">
                    <pre>
<span class="keyword">from</span> xcai.segmentation <span class="keyword">import</span> GraphCutter

cutter = <span class="function">GraphCutter</span>(n_segments=<span class="string">200</span>, compactness=<span class="string">15</span>)
labels = cutter.<span class="function">segment</span>(image)
                    </pre>
                </div>
                
                <div class="method">
                    <div class="method-header">
                        <span class="method-name">segment(image)</span>
                    </div>
                    
                    <p>执行图割分割。</p>
                    
                    <div class="method-signature">
segment(image)
                    </div>
                    
                    <h4>参数</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>参数名</th>
                                <th>类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>image</code></td>
                                <td>ndarray</td>
                                <td>输入图像，支持 RGB 或灰度图像</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>名称</th>
                                    <th>类型</th>
                                    <th>描述</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>labels</code></td>
                                    <td>ndarray</td>
                                    <td>分割标签图</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="method">
                    <div class="method-header">
                        <span class="method-name">get_superpixels(image)</span>
                    </div>
                    
                    <p>获取 SLIC 超像素结果（不进行合并）。</p>
                    
                    <div class="returns">
                        <h5>返回值</h5>
                        <p><code>labels</code> - 超像素标签图</p>
                    </div>
                </div>
            </section>
            
            <section class="section" id="watershedsegmenter">
                <h2>WatershedSegmenter</h2>
                
                <div class="class-def">
                    <code>
class <strong>WatershedSegmenter</strong>(markers='auto', compactness=0)
                    </code>
                </div>
                
                <p>分水岭分割器。基于形态学分水岭算法进行图像分割，适用于粘连目标的分割。</p>
                
                <h3>参数</h3>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>默认值</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>markers</code></td>
                            <td>str or ndarray</td>
                            <td>'auto'</td>
                            <td>标记点，'auto' 为自动检测，或手动指定标记数组</td>
                        </tr>
                        <tr>
                            <td><code>compactness</code></td>
                            <td>float</td>
                            <td>0</td>
                            <td>紧凑性参数，控制分割边界的规则程度</td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <div class="seealso">
                <h5>参见</h5>
                <ul>
                    <li><a href="denoising.html">xcrai.denoising</a> - 图像去噪模块</li>
                    <li><a href="tensor.html">xcrai.tensor</a> - 张量分解模块</li>
                    <li><a href="../examples/advanced_usage.html">高级用法示例</a></li>
                </ul>
            </div>
            
            <footer class="footer">
                <p>© 2024 XCAI Team. 基于 Sphinx 风格构建。</p>
            </footer>
        </main>
    </div>
    
    <script src="../js/search.js"></script>
</body>
</html>
