<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Xiaohao Cai 论文精读系统 - 收录80篇学术论文，涵盖深度学习、变分分割、医学图像、雷达信号处理等领域">
    <meta name="keywords" content="论文精读, 深度学习, 变分分割, 医学图像, 雷达信号, Xiaohao Cai">
    <meta name="author" content="Xiaohao Cai">
    <meta name="theme-color" content="#2563eb">
    <title>Xiaohao Cai 论文精读系统</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="css/main.css" as="style">
    <link rel="preload" href="js/data.js" as="script">
    <link rel="preload" href="js/app.js" as="script">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">跳转到主要内容</a>
    
    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar" role="navigation" aria-label="主导航">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-icon" aria-hidden="true">XC</span>
                <span class="logo-text">论文精读系统</span>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#dashboard" class="nav-item active" data-page="dashboard" role="button" aria-label="数据仪表盘">
                <span class="nav-icon" aria-hidden="true">📊</span>
                <span class="nav-text">数据仪表盘</span>
            </a>
            <a href="#papers" class="nav-item" data-page="papers" role="button" aria-label="论文列表">
                <span class="nav-icon" aria-hidden="true">📚</span>
                <span class="nav-text">论文列表</span>
                <span class="nav-badge" id="papersCountBadge">80</span>
            </a>
            <a href="#network" class="nav-item" data-page="network" role="button" aria-label="引用网络">
                <span class="nav-icon" aria-hidden="true">🕸️</span>
                <span class="nav-text">引用网络</span>
            </a>
            <a href="#timeline" class="nav-item" data-page="timeline" role="button" aria-label="研究时间线">
                <span class="nav-icon" aria-hidden="true">📈</span>
                <span class="nav-text">研究时间线</span>
            </a>
            <a href="pdfs.html" class="nav-item" role="link" aria-label="PDF原文列表">
                <span class="nav-icon" aria-hidden="true">📄</span>
                <span class="nav-text">PDF原文</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <div class="progress-widget">
                <div class="progress-header">
                    <span>整体进度</span>
                    <span class="progress-percent" id="sidebarProgressPercent">100%</span>
                </div>
                <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-fill" id="sidebarProgressFill" style="width:100%"></div>
                </div>
                <p class="progress-text" id="progressText">80/80 篇已完成</p>
            </div>
            <div class="keyboard-hint">
                <small>按 <kbd>/</kbd> 搜索，<kbd>Esc</kbd> 关闭弹窗</small>
            </div>
        </div>
    </aside>
    
    <!-- Main Content -->
    <main class="main-content" id="main-content" role="main">
        <!-- Top Bar -->
        <header class="top-bar" role="banner">
            <button class="menu-toggle" id="menuToggle" aria-label="打开菜单" aria-expanded="false">
                <span aria-hidden="true">☰</span>
            </button>
            <h1 class="page-title" id="pageTitle">数据仪表盘</h1>
            <div class="top-actions">
                <div class="search-box">
                    <label for="globalSearch" class="visually-hidden">搜索论文</label>
                    <input type="search" 
                           placeholder="搜索论文... (按 / 快速聚焦)" 
                           id="globalSearch"
                           autocomplete="off"
                           aria-label="搜索论文">
                </div>
            </div>
        </header>
        
        <!-- Content Container -->
        <div class="content-container">
            <!-- Dashboard Page -->
            <section class="page active" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
                <div class="stats-row">
                    <article class="stat-card">
                        <div class="stat-icon bg-blue" aria-hidden="true">📄</div>
                        <div class="stat-info">
                            <h3>论文总数</h3>
                            <p class="stat-value" id="totalPapers">-</p>
                        </div>
                    </article>
                    <article class="stat-card">
                        <div class="stat-icon bg-green" aria-hidden="true">✓</div>
                        <div class="stat-info">
                            <h3>已完成</h3>
                            <p class="stat-value" id="completedPapers">-</p>
                        </div>
                    </article>
                    <article class="stat-card">
                        <div class="stat-icon bg-purple" aria-hidden="true">🏷️</div>
                        <div class="stat-info">
                            <h3>研究领域</h3>
                            <p class="stat-value" id="categoryCount">6</p>
                        </div>
                    </article>
                    <article class="stat-card">
                        <div class="stat-icon bg-orange" aria-hidden="true">📅</div>
                        <div class="stat-info">
                            <h3>时间跨度</h3>
                            <p class="stat-value">17年</p>
                        </div>
                    </article>
                </div>
                
                <div class="charts-row">
                    <div class="chart-card">
                        <h3>论文分类分布</h3>
                        <div class="chart-wrap">
                            <canvas id="categoryChart" aria-label="论文分类分布图"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>完成状态</h3>
                        <div class="chart-wrap">
                            <canvas id="completionChart" aria-label="论文完成状态图"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="chart-card full-width">
                    <h3>各领域完成进度</h3>
                    <div class="progress-list" id="categoryProgress">
                        <!-- Dynamically populated -->
                    </div>
                </div>
            </section>
            
            <!-- Papers Page -->
            <section class="page" id="papers" role="tabpanel" aria-labelledby="papers-tab">
                <div class="filter-bar">
                    <div class="filter-group">
                        <label for="categoryFilter">分类:</label>
                        <select id="categoryFilter" aria-label="按分类筛选">
                            <option value="all">全部</option>
                            <option value="基础理论">基础理论</option>
                            <option value="变分分割">变分分割</option>
                            <option value="深度学习">深度学习</option>
                            <option value="雷达与无线电">雷达与无线电</option>
                            <option value="医学图像">医学图像</option>
                            <option value="其他">其他</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="sortFilter">排序:</label>
                        <select id="sortFilter" aria-label="排序方式">
                            <option value="id">按编号</option>
                            <option value="year">按年份</option>
                            <option value="category">按分类</option>
                        </select>
                    </div>
                    <div class="filter-results" id="filterResults" aria-live="polite"></div>
                </div>
                
                <div class="papers-grid" id="papersGrid" role="list">
                    <!-- Dynamically populated -->
                </div>
                
                <nav class="pagination" id="pagination" role="navigation" aria-label="分页导航">
                    <!-- Dynamically populated -->
                </nav>
            </section>
            
            <!-- Network Page -->
            <section class="page" id="network" role="tabpanel" aria-labelledby="network-tab">
                <div class="network-info">
                    <h3>📌 交互说明</h3>
                    <p>拖拽节点可重新排列 | 滚轮缩放 | 点击节点查看详情</p>
                </div>
                <div id="networkChart" style="height:600px" role="img" aria-label="论文引用网络图"></div>
            </section>
            
            <!-- Timeline Page -->
            <section class="page" id="timeline" role="tabpanel" aria-labelledby="timeline-tab">
                <div class="timeline-filters" role="group" aria-label="时间线筛选">
                    <button class="filter-btn active" data-filter="all">全部</button>
                    <button class="filter-btn" data-filter="基础理论">基础理论</button>
                    <button class="filter-btn" data-filter="变分分割">变分分割</button>
                    <button class="filter-btn" data-filter="深度学习">深度学习</button>
                    <button class="filter-btn" data-filter="雷达与无线电">雷达与无线电</button>
                    <button class="filter-btn" data-filter="医学图像">医学图像</button>
                    <button class="filter-btn" data-filter="其他">其他</button>
                </div>
                <div id="timelineChart" style="height:600px; max-height:70vh;" role="img" aria-label="研究时间线图"></div>
            </section>
        </div>
    </main>
    
    <!-- Paper Detail Modal -->
    <div class="modal modal-large" id="paperModal" role="dialog" aria-modal="true" aria-labelledby="modalPaperTitle">
        <div class="modal-overlay" aria-hidden="true"></div>
        <div class="modal-content">
            <div class="modal-toolbar">
                <div class="modal-title-section">
                    <span class="paper-id-badge" id="modalPaperId"></span>
                    <h2 id="modalPaperTitle"></h2>
                </div>
                <button class="modal-close" aria-label="关闭弹窗">✕</button>
            </div>
            <div class="modal-meta-bar">
                <span class="badge" id="modalPaperCategory"></span>
                <span class="paper-year" id="modalPaperYear"></span>
                <span class="badge" id="modalPaperStatus"></span>
            </div>
            <div class="modal-actions-bar">
                <button class="btn btn-primary" id="btnReadNote">
                    <span aria-hidden="true">📖</span> 查看精读笔记
                </button>
                <button class="btn btn-secondary" id="btnViewPDF">
                    <span aria-hidden="true">📄</span> 查看论文原文
                </button>
            </div>
            <div class="modal-body-full" id="notePreview">
                <div class="placeholder">
                    <div class="placeholder-icon">📖</div>
                    <p>点击上方按钮查看内容</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" aria-hidden="true">
        <div class="loading-spinner-large"></div>
        <p>加载中...</p>
    </div>
    
    <!-- Scripts -->
    <script src="lib/chart.js"></script>
    <script src="lib/echarts.min.js"></script>
    <script src="lib/marked.min.js"></script>
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
    
    <!-- 测试脚本 -->
    <script>
        // 简单的测试，检查是否所有资源都加载成功
        console.log('=== 页面加载测试 ===');
        console.log('Chart.js:', typeof Chart !== 'undefined' ? '已加载' : '未加载');
        console.log('ECharts:', typeof echarts !== 'undefined' ? '已加载' : '未加载');
        console.log('Marked:', typeof marked !== 'undefined' ? '已加载' : '未加载');
        console.log('PAPERS_DATA:', typeof PAPERS_DATA !== 'undefined' ? '已加载 (' + PAPERS_DATA.papers.length + '篇)' : '未加载');
        console.log('papersGrid 元素:', document.getElementById('papersGrid') ? '存在' : '不存在');
    </script>
</body>
</html>
